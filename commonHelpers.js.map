{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery-list'),\n  loader: document.querySelector('span'),\n};\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n  refs.gallery.innerHTML = '';\n  refs.loader.hidden = false;\n  refs.loader.classList.add('loader');\n\n  const form = event.currentTarget;\n  const searchQuery = form.elements.search.value;\n\n  fetchImg(searchQuery)\n    .then(data => {\n      if (!data.total) {\n        onFetchError();\n      } else {\n        renderGallery(data);\n      }\n    })\n    .catch(onFetchError)\n    .finally(() => {\n      refs.loader.classList.remove('loader');\n      refs.loader.hidden = true;\n    });\n\n  refs.form.reset();\n}\n\nfunction fetchImg(tags) {\n  return fetch(\n    `https://pixabay.com/api/?key=41464538-044fa7fe64ee4a60fb4972757&q=${tags}&image_type=photo&orientation=horizontal&safesearch=true`\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nfunction renderGallery(data) {\n  const imagesData = data.hits;\n  const images = imagesData.map(image => {\n    return {\n      preview: image.webformatURL,\n      original: image.largeImageURL,\n      description: image.tags,\n      views: image.views,\n      comments: image.comments,\n      downloads: image.downloads,\n      likes: image.likes,\n    };\n  });\n\n  const galleryString = images.reduce(\n    (\n      html,\n      { preview, original, description, views, comments, downloads, likes }\n    ) => {\n      return (\n        html +\n        `<li class=\"gallery\">\n          <a class=\"gallery-link\" href=${original} >       \n           <img\n            class=\"gallery-image\"\n            src=${preview}\n            alt=\"${description}\"\n            />          <ul class=\"desc\">\n            <li class=\"desc-item\">\n              <h2 class=\"desc-title\">likes</h2>\n              <p class=\"desc-text\">${likes}</p>\n            </li>\n            <li class=\"desc-item\">\n              <h2 class=\"desc-title\">views</h2>\n              <p class=\"desc-text\">${views}</p>\n            </li>\n            <li class=\"desc-item\">\n              <h2 class=\"desc-title\">comments</h2>\n              <p class=\"desc-text\">${comments}</p>\n            </li>\n            <li class=\"desc-item\">\n              <h2 class=\"desc-title\">downloads</h2>\n              <p class=\"desc-text\">${downloads}</p>\n            </li>\n          </ul></a>\n        </li>`\n      );\n    },\n    ''\n  );\n\n  refs.gallery.insertAdjacentHTML('afterbegin', galleryString);\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nfunction onFetchError() {\n  iziToast.error({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n"],"names":["refs","onFormSubmit","event","searchQuery","fetchImg","data","renderGallery","onFetchError","tags","response","galleryString","image","html","preview","original","description","views","comments","downloads","likes","SimpleLightbox","iziToast"],"mappings":"6vBAQA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,QAAS,SAAS,cAAc,eAAe,EAC/C,OAAQ,SAAS,cAAc,MAAM,CACvC,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAY,EAEjD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBF,EAAK,QAAQ,UAAY,GACzBA,EAAK,OAAO,OAAS,GACrBA,EAAK,OAAO,UAAU,IAAI,QAAQ,EAGlC,MAAMG,EADOD,EAAM,cACM,SAAS,OAAO,MAEzCE,EAASD,CAAW,EACjB,KAAKE,GAAQ,CACPA,EAAK,MAGRC,EAAcD,CAAI,EAFlBE,GAIR,CAAK,EACA,MAAMA,CAAY,EAClB,QAAQ,IAAM,CACbP,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrCA,EAAK,OAAO,OAAS,EAC3B,CAAK,EAEHA,EAAK,KAAK,OACZ,CAEA,SAASI,EAASI,EAAM,CACtB,OAAO,MACL,qEAAqEA,2DACzE,EAAI,KAAKC,GAAY,CACjB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASH,EAAcD,EAAM,CAc3B,MAAMK,EAbaL,EAAK,KACE,IAAIM,IACrB,CACL,QAASA,EAAM,aACf,SAAUA,EAAM,cAChB,YAAaA,EAAM,KACnB,MAAOA,EAAM,MACb,SAAUA,EAAM,SAChB,UAAWA,EAAM,UACjB,MAAOA,EAAM,KACnB,EACG,EAE4B,OAC3B,CACEC,EACA,CAAE,QAAAC,EAAS,SAAAC,EAAU,YAAAC,EAAa,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,MAAAC,CAAO,IAGnEP,EACA;AAAA,yCACiCE;AAAA;AAAA;AAAA,kBAGvBD;AAAA,mBACCE;AAAA;AAAA;AAAA;AAAA,qCAIkBI;AAAA;AAAA;AAAA;AAAA,qCAIAH;AAAA;AAAA;AAAA;AAAA,qCAIAC;AAAA;AAAA;AAAA;AAAA,qCAIAC;AAAA;AAAA;AAAA,eAMjC,EACJ,EAEElB,EAAK,QAAQ,mBAAmB,aAAcU,CAAa,EAC1C,IAAIU,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CAEA,SAASb,GAAe,CACtBc,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACN,CAAG,CACH"}